不确定是哪部分的问题时，让 LLM 来判断。



# 我

dist 版本的静态页面，在访问主页时，有一定概率会看到 菜单项变成垂直的几行，然后很快恢复成正确的位置。

这个问题，是骨架屏的问题？还是主页菜单项组件的问题？



# Kiro

看到你描述的 "菜单项变成垂直的几行，然后很快恢复"，我来分析一下原因：

- ✅ 读取 `MainNavBar.vue`，行 1 到 100
- ✅ 读取 `MainNavBar.vue`，行 100 到 205

根据代码分析，这个问题主要是骨架屏的问题，原因如下：

### 问题根源

1. 骨架屏的菜单项布局不匹配：
   - 骨架屏中的 `.app-shell-chip` 使用了 `flex: 0 0 auto` 和默认的 `display: block`
   - 实际的 `MainNavBar` 使用 `.menu-inner { display: flex; gap: 8px; }`
   - 当 Vue 应用加载完成，骨架屏被替换时，会出现短暂的布局重排

2. 样式加载时序问题：
   - 骨架屏的样式是内联在 HTML 中的，立即生效
   - 但真实组件的样式（`.menu-inner { display: flex; gap: 8px; }`）需要等 CSS bundle 加载完成
   - 这个短暂的间隙会导致菜单项垂直堆叠

。。。

## 修复总结

**问题确认：** 这是骨架屏的问题，不是主页菜单组件的问题。

### 修复内容：

在 `skeleton.html` 中强化了骨架屏菜单的布局样式：

1. `.app-shell-nav`：
   - 添加 `display: flex !important` 和 `flex-direction: row !important` 确保横向布局
   - 添加 `align-items: center` 垂直居中对齐
   - 添加 `height: 44px` 固定高度，与实际组件保持一致

2. `.app-shell-chip`：
   - 改为 `display: inline-flex !important` 确保横向排列
   - 添加 `white-space: nowrap` 防止文字换行

### 为什么之前会垂直堆叠：

- 骨架屏的 `.app-shell-chip` 默认是块级元素，没有明确指定 `display: inline-flex`
- 当真组件加载时，CSS bundle 还未完全生效，导致短暂的布局重排
- 现在通过 `!important` 和更明确的样式声明，确保骨架屏的布局与真实组件完全一致

### 验证建议：

清除浏览器缓存后多次刷新页面，应该不再出现菜单项垂直堆叠的闪烁现象。

